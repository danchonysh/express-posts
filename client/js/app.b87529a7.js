(function(t){function e(e){for(var a,i,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0c20":function(t,e,n){},"0cee":function(t,e,n){},"33c2":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=n("2f62"),o=(n("4de4"),n("96cf"),n("1da1"));n("d3b7");function i(t){return r.apply(this,arguments)}function r(){return r=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,o,i,r,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"GET",a=c.length>2&&void 0!==c[2]?c[2]:null,t.prev=2,s={},a&&(s["Content-Type"]="application/json",o=JSON.stringify(a)),t.next=7,fetch(e,{method:n,headers:s,body:o});case 7:return i=t.sent,t.next=10,i.json();case 10:return r=t.sent,t.next=13,r;case 13:return t.abrupt("return",t.sent);case 16:t.prev=16,t.t0=t["catch"](2),console.warn("Error: ",t.t0);case 19:case"end":return t.stop()}}),t,null,[[2,16]])}))),r.apply(this,arguments)}var c=i,l={state:{posts:[]},actions:{getPosts:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,c("/api/posts");case 3:a=t.sent,n("getPosts",a);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),addPosts:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,c("/api/posts","POST",n);case 3:a("addPosts",n);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),deletePosts:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,c("/api/posts/".concat(n));case 3:a("deletePosts",n);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},mutations:{getPosts:function(t,e){t.posts;return e},addposts:function(t,e){t.posts.unshift(e)},deletePosts:function(t,e){var n=t.posts;n=n.filter((function(t){return t.id!==e}))}},getters:{allPosts:function(t){return t.posts}}},u={state:{news:[]},actions:{getNews:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,c("/api/news");case 3:a=t.sent,n("getNews",a);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),addNews:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,c("/api/news","POST",n);case 3:a("addNews",n);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),deleteNews:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,c("/api/news/".concat(n));case 3:a("deleteNews",n);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},mutations:{getNews:function(t,e){t.news;return e},addNews:function(t,e){t.news.unshift(e)},deleteNews:function(t,e){var n=t.news;n=n.filter((function(t){return t.id!==e}))}},getters:{allNews:function(t){return t.news}}},d=(n("4160"),n("159b"),{state:{display:0,tabs:[{title:"News",active:!0},{title:"Posts",active:!1}],changing:!1},actions:{changeDisplay:function(t,e){return t.commit("changeDisplay",e)},changeTab:function(t,e){return t.commit("changeTab",e)},isChanging:function(t,e){return t.commit("isChanging",e)}},mutations:{changeDisplay:function(t,e){return t.display=e},changeTab:function(t,e){t.tabs.forEach((function(t){return t.active=!1})),t.tabs[e].active=!0},isChanging:function(t,e){return t.changing=e}},getters:{display:function(t){return t.display},tabs:function(t){return t.tabs},changing:function(t){return t.changing}}}),p={state:{config:{},show:!1},actions:{changeModal:function(t,e){return t.commit("changeModal",e)},showModal:function(t,e){return t.commit("showModal",e)}},mutations:{changeModal:function(t,e){var n=e.curr,a=e.prev;switch(n){case"news":t.config={title:"Adding news",type:"news",closable:!1};break;case"post":t.config={title:"Adding post",type:"post",closable:!1};break;case"warn":t.config={title:"Warning",type:"warn",content:'\n\t\t\t\t\t\t\t<p \t\n\t\t\t\t\t\t\t\tclass="modal__content-warning">\n\t\t\t\t\t\t\t\tPlease, fill in the blank!\n\t\t\t\t\t\t\t</p>',prev:a,closable:!1};break}},showModal:function(t,e){return t.show=e}},getters:{isVisible:function(t){return t.show},getModal:function(t){return t.config}}};a["a"].use(s["a"]);var f=new s["a"].Store({modules:{posts:l,news:u,pageState:d,modal:p}}),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("Header"),n("Content"),n("Footer"),n("Modal")],1)},w=[],m=(n("0cee"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"container header"},[n("h1",{staticClass:"header__title"},[t._v("Awesome Posts")]),n("p",{staticClass:"header__subtitle"},[t._v("Write and publish anything ")])])])}],v=(n("0c20"),{}),_=v,b=n("2877"),y=Object(b["a"])(_,m,g,!1,null,null,null),C=y.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("div",{staticClass:"container content"},[n("div",{staticClass:"btn-wrapper"},[n("nav",{staticClass:"tab"},[n("ul",{staticClass:"tab__list"},t._l(t.tabs,(function(e,a){return n("Tab",{key:e.title,attrs:{tab:e},nativeOn:{click:function(e){return t.tabClick(a)}}})})),1)]),n("button",{staticClass:"add",on:{click:function(e){return t.toggleModal(t.display?"post":"news")}}},[t._v(" Add ")])]),n("article",{class:{tab__item:!0,change:t.changing}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"posts"},[t.allPosts.length?t._l(t.allPosts,(function(t){return n("Post",{key:t.id,attrs:{post:t}})})):n("div",{staticClass:"no-content"},[t._v("There is no posts right now...")])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.display,expression:"!display"}],staticClass:"news"},[t.allNews.length?t._l(t.allNews,(function(t){return n("News",{key:t.id,attrs:{news:t}})})):n("div",{staticClass:"no-content"},[t._v("There is no news right now...")])],2)])])])},x=[],O=n("5530"),P=(n("33c2"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:{"tab__list-item":!0,active:t.tab.active}},[t._v(t._s(t.tab.title))])}),j=[],k=(n("64f3"),{props:{tab:{Type:Object,required:!0}}}),N=k,T=Object(b["a"])(N,P,j,!1,null,null,null),A=T.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"post"},[n("img",{staticClass:"post__photo",attrs:{src:t.post.value}}),n("caption",{staticClass:"post__text"},[t._v(t._s(t.post.caption))]),n("p",{staticClass:"post__time"},[t._v(t._s(t.formatted))]),n("span",{staticClass:"post__delete",on:{click:function(e){return t.deletePost(t.post.id)}}},[t._v("×")])])},R=[];n("7546"),n("99af");function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=new Date(t),a=n.getFullYear(),s=n.getMonth()>8?n.getMonth()+1:"0".concat(n.getMonth()+1),o=n.getDate()>9?n.getDate():"0".concat(n.getDate()),i=n.getHours()>9?n.getHours():"0".concat(n.getHours()),r=n.getMinutes()>9?n.getMinutes():"0".concat(n.getMinutes()),c=new Date(Date.now()),l=Math.floor((c-n)/6e4),u=Math.floor(l/60),d=Math.floor(u/24),p=Math.floor(d/7),f="minutes",h="hours",w="days",m="weeks",g="ago",v="just now",_="An hour",b="A day",y="A week";if("ru"===e){var C=function(t,e,n,a){var s;return a<=20?(a>=2&&(s=e),a>=5&&(s=n)):(a%10===1&&(s=t),a%10>1&&(s=e),(a%10>4||a%10===0)&&(s=n)),s};g="назад",v="Только что",_="Час",b="День",y="Неделю",f=C("минуту","минуты","минут",l),h=C("час","часа","часов",u),w=C("день","дня","дней",d),m=C("неделю","недели","недель",p)}return l<5?v:l<=59?"".concat(l," ").concat(f," ").concat(g):1===u?"".concat(_," ").concat(g):u<=23?"".concat(u," ").concat(h," ").concat(g):1===d?"".concat(b," ").concat(g):d<=29?"".concat(d," ").concat(w," ").concat(g):1===p?"".concat(y," ").concat(g):p>1&&p<=3?"".concat(p," ").concat(m," ").concat(g):p>4?"".concat(o,".").concat(s,".").concat(a," \\ ").concat(i,":").concat(r):void 0}var E={props:{post:{Type:Object,required:!0}},data:function(){return{formatted:$(this.post.date)}},mounted:function(){var t=this;setInterval((function(){t.formatted=$(t.post.date)}),6e4)},methods:Object(s["b"])(["deletePost"])},S=E,H=Object(b["a"])(S,D,R,!1,null,null,null),V=H.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"article"},[n("h3",{staticClass:"article__title"},[t._v(t._s(t.news.title))]),n("pre",{staticClass:"article__content"},[t._v(t._s(t.news.content))]),n("p",{staticClass:"article__time"},[t._v(t._s(t.formatted))]),n("span",{staticClass:"article__delete",on:{click:function(e){return t.deleteNews(t.news.id)}}},[t._v(" × ")])])},q=[],F=(n("706e"),{props:{news:{Type:Object,required:!0}},data:function(){return{formatted:$(this.news.date)}},mounted:function(){var t=this;setInterval((function(){t.formatted=$(t.news.date)}),6e4)},methods:Object(s["b"])(["deleteNews"])}),I=F,J=Object(b["a"])(I,L,q,!1,null,null,null),W=J.exports,G={components:{Tab:A,Post:V,News:W},computed:Object(s["c"])(["allNews","allPosts","tabs","display","changing"]),methods:Object(O["a"])(Object(O["a"])({},Object(s["b"])(["changeDisplay","changeTab","isChanging","showModal","changeModal"])),{},{tabClick:function(t){var e=this;this.display!==t&&(this.changeTab(t),this.isChanging(!0),setTimeout((function(){e.changeDisplay(t)}),300),setTimeout((function(){e.isChanging(!1)}),1e3))},toggleModal:function(t){this.changeModal({curr:t}),this.showModal(!0)}})},K=G,U=Object(b["a"])(K,M,x,!1,null,null,null),Y=U.exports,z=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},B=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("div",{staticClass:"container footer"},[n("ul",{staticClass:"link-list"},[n("li",{staticClass:"link-list__item"},[n("a",{attrs:{href:"https://vk.com/danchonysh"}},[t._v("vk")])]),n("li",{staticClass:"link-list__item"},[n("a",{attrs:{href:"https://www.instagram.com/danchenysh/"}},[t._v("Instagram")])])]),n("p",{staticClass:"footer__copyright"},[t._v("© All rights kinda reserved, u know.")])])])}],Q=(n("8253"),{}),X=Q,Z=Object(b["a"])(X,z,B,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{class:{modal:!0,show:t.isVisible,hide:!t.isVisible},on:{click:function(e){t.getModal.closable&&t.showModal(!1)}}},[n("div",{class:{modal__window:!0,open:t.isVisible,close:!t.isVisible},style:{width:t.getModal.width||"min(400px, 90%)"},on:{click:function(t){t.stopPropagation()}}},[t.getModal.closable?n("span",{staticClass:"modal__close",on:{click:function(e){return t.showModal(!1)}}},[t._v("×")]):t._e(),n("h2",{staticClass:"modal__header"},[t._v(t._s(t.getModal.title))]),n("div",{staticClass:"modal__content"},["post"===t.getModal.type?n("form",{staticClass:"new-post",attrs:{enctype:"multipart/form-data",method:"post"},on:{submit:function(t){t.preventDefault()}}},[n("input",{ref:"file",staticClass:"new-post__photo",attrs:{id:"file",type:"file",accept:"image/*"},on:{change:function(e){return t.fileHandler()}}}),n("label",{staticClass:"upload",attrs:{for:"file"}},[t._v(" "+t._s(t.text)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPost.caption,expression:"newPost.caption"}],staticClass:"new-post__content",attrs:{name:"article",type:"text",placeholder:"Write something"},domProps:{value:t.newPost.caption},on:{input:function(e){e.target.composing||t.$set(t.newPost,"caption",e.target.value)}}})]):t._e(),"news"===t.getModal.type?n("form",{staticClass:"new-aritcle",on:{submit:function(t){t.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newArticle.title,expression:"newArticle.title"}],staticClass:"new-article__title",attrs:{name:"title",type:"text",placeholder:"Title"},domProps:{value:t.newArticle.title},on:{input:function(e){e.target.composing||t.$set(t.newArticle,"title",e.target.value)}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newArticle.content,expression:"newArticle.content"}],staticClass:"new-article__content",attrs:{name:"article",type:"text",placeholder:"Article"},domProps:{value:t.newArticle.content},on:{input:function(e){e.target.composing||t.$set(t.newArticle,"content",e.target.value)}}})]):t._e(),n("div",{domProps:{innerHTML:t._s(t.getModal.content)}})]),n("div",{staticClass:"modal__footer"},[n("button",{staticClass:"modal__button ok",on:{click:function(e){return t.handler()}}},[t._v(" "+t._s("warn"===t.getModal.type?"OK":"Add")+" ")]),"warn"!==t.getModal.type?n("button",{staticClass:"modal__button cancel",on:{click:function(e){return t.showModal(!1)}}},[t._v(" Cancel ")]):t._e()])])])},nt=[],at=(n("fb6a"),n("b0c0"),n("498a"),n("8393"),"Choose a file"),st={computed:Object(s["c"])(["isVisible","getModal"]),data:function(){return{newArticle:{title:"",content:""},newPost:{caption:"",value:""},text:at}},methods:Object(O["a"])(Object(O["a"])({},Object(s["b"])(["showModal","addNews","addPost","changeModal"])),{},{fileHandler:function(){var t=this,e=new FileReader;e.readAsDataURL(this.$refs.file.files[0]);var n=this.$refs.file.files[0].name;this.text=n.length>12?n.slice(0,12)+"...":n,e.onload=function(e){t.newPost.value=e.target.result}},smoothChange:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"news";this.showModal(!1),setTimeout((function(){e.changeModal({curr:t,prev:n}),e.showModal(!0)}),300)},handler:function(){var t=this,e=this.getModal.type;if("news"===e){var n=this.newArticle.title.trim(),a=this.newArticle.content.trim();n&&a?(this.showModal(!1),this.addNews({title:n,content:a,date:new Date(Date.now()).toLocaleString(),id:"n"+Date.now()}),this.newArticle={title:"",content:""}):this.smoothChange("warn","news")}if("post"===e){var s=this.newPost,o=s.caption,i=s.value;o.trim()&&i?(this.showModal(!1),this.addPost({caption:o,value:i,date:new Date(Date.now()).toLocaleString(),id:"p"+Date.now()}),this.newPost={caption:"",value:""},setTimeout((function(){return t.text=at}),500)):this.smoothChange("warn","post")}"warn"===e&&(console.log(this.getModal.prev),this.smoothChange(this.getModal.prev))}}),mounted:function(){document.querySelector(".modal").classList.remove("hide")}},ot=st,it=Object(b["a"])(ot,et,nt,!1,null,null,null),rt=it.exports,ct={components:{Header:C,Content:Y,Footer:tt,Modal:rt}},lt=ct,ut=Object(b["a"])(lt,h,w,!1,null,null,null),dt=ut.exports;a["a"].config.productionTip=!0,new a["a"]({store:f,render:function(t){return t(dt)}}).$mount("#app")},"64f3":function(t,e,n){},"706e":function(t,e,n){},7546:function(t,e,n){},8253:function(t,e,n){},8393:function(t,e,n){}});